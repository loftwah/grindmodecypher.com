!function(){var i=function(){jQuery(function(i){var t={fire:function(t){var e=this;if(e.hasBeenInit=e.hasBeenInit||i.Deferred(),_.isObject(t)&&(t=_.extend({module_id:"",isSingleSlide:!1,isLazyLoad:!0,isFreeScroll:!1,isParallaxOn:!0,parallaxRatio:.55,isFixedCaption:!1,timeInterval:5e3,isAutoplay:!1,pauseAutoPlayOnHover:!0,captionFontRatio:0,isDoingPartialRefresh:!1},t||{}),i.extend(e,t)),_.isEmpty(e.module_id))throw new Error("proHeaderSlid, missing module_id");e.loadingIconVisible=new czrapp.Value(!1),e.loadingIconVisible.bind(function(t){var a=i("#ha-large-header").find(".czr-css-loader");1==a.length&&(t?i.when(a.css({display:"block",opacity:0})).done(function(){a.css({opacity:1})}):(a.css({opacity:0}),_.delay(function(){a.css({display:"none"})},800)),clearTimeout(i.data(this,"loadIconTimer")),i.data(this,"loadIconTimer",_.delay(function(){e.loadingIconVisible(!1)},2e3)))}),e.loadingIconVisible(!0),e.captionFontRatio=Math.abs(parseInt(e.captionFontRatio,10))>50?0:parseInt(e.captionFontRatio,10),e.captionFontRatio=1+Math.round(100*e.captionFontRatio/100)/100,_.isUndefined(i.fn.proHeaderFitText)&&e._addJqueryFitText(),czrapp.bind("flickity-slider-fired",function(i){1<=i.find(".carousel-caption .hph-title").length&&i.find(".carousel-caption .hph-title").proHeaderFitText(1.5,{maxFontSize:65*e.captionFontRatio,minFontSize:30,captionFontRatio:e.captionFontRatio}),1<=i.find(".carousel-caption .hph-subtitle").length&&i.find(".carousel-caption .hph-subtitle").proHeaderFitText(1.9,{maxFontSize:35*e.captionFontRatio,minFontSize:20,captionFontRatio:e.captionFontRatio}),1<=i.find(".carousel-caption .meta-single").length&&i.find(".carousel-caption .meta-single").proHeaderFitText(2.5,{maxFontSize:16.5*e.captionFontRatio,minFontSize:14,captionFontRatio:e.captionFontRatio})}),e.lazyLoadOpt=!1,e.isLazyLoad&&(e.lazyLoadOpt=!e.isFreeScroll||2),czrapp.ready.then(function(){var i=function(){e.flickityEl=e._fire_(),!e.flickityEl||!_.isObject(e.flickityEl)||1>e.flickityEl.length?czrapp.errorLog("Pro Header Flickity slider not properly fired"):czrapp.trigger("flickity-slider-fired",e.flickityEl)};if("pending"==e.hasBeenInit.state())e._init().done(function(){i()});else{if(1>=e.flickityEl.length&&!_.isUndefined(e.flickityEl.data("flickity")))return;i()}})},_init:function(){var t=this;return i.Deferred(function(){var e=Flickity.prototype.activate;Flickity.prototype.activate=function(){if(!this.isActive){e.apply(this,arguments),i(this.element).trigger("hu-flickity-ready")}};var a=Flickity.LazyLoader.prototype.load;Flickity.LazyLoader.prototype.load=function(){this.flickity.dispatchEvent("lazyLoad-start",null,this.img.getAttribute("data-flickity-lazyload")),$img=i(this.img),$img.attr("srcset",$img.attr("data-flickity-srcset")).attr("sizes",$img.attr("data-flickity-imgsizes")),$img.removeAttr("data-flickity-srcset").removeAttr("data-flickity-imgsizes"),a.apply(this,arguments)},czrapp.$_body.on("click tap prev.hu-slider",".slider-prev",function(i){t._slider_arrows.apply(this,[i,"previous"])}),czrapp.$_body.on("click tap next.hu-slider",".slider-next",function(i){t._slider_arrows.apply(this,[i,"next"])}),t.hasBeenInit.resolve(),this.resolve()}).promise()},_fire_:function(){var t=this,e=i(".carousel-inner","#"+t.module_id);if(1>e.length)czrapp.errorLog("Flickity slider dom element is empty : "+t.module_id);else{if(!(1<e.length)){e.on("hu-flickity-ready.flickity",function(a){if(t.isParallaxOn&&i(a.target).children(".flickity-viewport").css("will-change","transform").czrParallax({parallaxRatio:t.parallaxRatio}),t.isFixedCaption){var n=e.find(".carousel-caption-wrapper");e.find(".flickity-viewport").prepend(n)}});var a=function(i){var t="select"==i?"translate3d(-50%, -50%, 0)":"";return{"-webkit-transform":t,"-ms-transform":t,"-o-transform":t,transform:t}};t._flickityse(),t._centerSlidise();var n=!0;return _.delay(function(){e.on("scroll.flickity",_.throttle(function(i){!0,e.find(".carousel-caption").css(a(n?"settle":"select"))},250)),e.on("select.flickity",function(i){n=!1}),e.on("settle.flickity",function(i){n=!0,!1,e.find(".carousel-caption").css(a("settle"))}),czrapp.userXP&&czrapp.userXP.isResizing&&czrapp.userXP.isResizing.bind(_.debounce(function(i){e.find(".carousel-caption").css(a(i?"select":"settle"))},700)),t.imgLazyLoaded=[];var o=function(i,e){t.loadingIconVisible(i)};o=_.debounce(o,100),e.on("lazyLoad-start.flickity",function(i,t){o(!0,t)}),e.on("lazyLoad.flickity",function(e,a){if(1==i(a).length){var n=i(a).find("img");1==n.length&&t.imgLazyLoaded.push(n.attr("src")),o(!1,n.attr("src"))}else o(!1)}),t.loadingIconVisible(!1),e.css({opacity:1}),i("#ha-large-header").find("#"+t.module_id).addClass("slider-ready")},50),e}czrapp.errorLog("Header Slider Aborted : more than one flickity slider dom element : "+t.module_id)}},_flickityse:function(){var t=!1;this.isAutoplay&&(t=!(_.isNumber(this.timeInterval)&&this.timeInterval>0)||this.timeInterval),i(".carousel-inner","#"+this.module_id).flickity({prevNextButtons:!1,pageDots:!this.isSingleSlide,wrapAround:!0,imagesLoaded:!0,setGallerySize:!1,cellSelector:".carousel-cell",dragThreshold:10,autoPlay:t,pauseAutoPlayOnHover:this.pauseAutoPlayOnHover,accessibility:!1,lazyLoad:this.lazyLoadOpt,draggable:!this.isSingleSlide,freeScroll:this.isFreeScroll,freeScrollFriction:.03})},_slider_arrows:function(t,e){t.preventDefault();var a=i(this),n=a.data("controls");a.length&&(n||(n=a.closest(".pc-section-slider").find(".flickity-enabled").data("flickity"),a.data("controls",n)),"previous"==e?n.previous():"next"==e&&n.next())},_centerSlidise:function(){var t=this;setTimeout(function(){i.each(i(".carousel-inner","#"+t.module_id),function(){i(this).centerImages({enableCentering:1,imgSel:".carousel-image img",oncustom:["lazyLoad.flickity","settle.flickity","simple_load"],defaultCSSVal:{width:"100%",height:"auto"},useImgAttr:!0,zeroTopAdjust:0})})},50)},_addJqueryFitText:function(){if(!i.fn.proHeaderFitText){var t=this;i.fn.proHeaderFitText=function(e,a){var n=e||1,o=i.extend({minFontSize:Number.NEGATIVE_INFINITY,maxFontSize:Number.POSITIVE_INFINITY,captionFontRatio:1},a),r=o.captionFontRatio;return this.each(function(){var e=i(this),a=function(){var i=Math.max(Math.min(e.width()/(10*n),t.flickityEl&&t.flickityEl.length>=1?t.flickityEl.height()/(8*n):e.width()/(10*n),parseFloat(o.maxFontSize)),parseFloat(o.minFontSize));i=Math.max(i*r,parseFloat(o.minFontSize)),e.css("font-size",i),e.css("line-height",1.45*i+"px")};a(),i(window).on("resize.fittext orientationchange.fittext",a),czrapp&&czrapp.ready&&czrapp.ready.then(function(){if(czrapp.userXP._isCustomizing()){var i=function(){wp.customize.preview.bind("czr_input",function(){a()})};wp.customize.topics&&wp.customize.topics["preview-ready"]&&wp.customize.topics["preview-ready"].fired()?i():wp.customize.bind("preview-ready",i)}})})}}}};czrapp.methods.ProHeaderSlid=czrapp.methods.ProHeaderSlid||{},i.extend(czrapp.methods.ProHeaderSlid,t);var e=document.createEvent("Event");e.initEvent("hu-hph-front-loaded",!0,!0),document.dispatchEvent(e)})};window.czrapp&&czrapp.ready&&"resolved"===czrapp.ready.state()?i():document.addEventListener("czrapp-is-ready",i)}();