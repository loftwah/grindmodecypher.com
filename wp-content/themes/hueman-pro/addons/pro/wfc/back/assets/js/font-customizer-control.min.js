var CZRWFCModuleMths=CZRWFCModuleMths||{};!function(a,b,c,d){b.extend(CZRWFCModuleMths,{initialize:function(e,f){var g=this;g.initialConstrucOptions=b.extend(!0,{},f),a.CZRDynModule.prototype.initialize.call(g,e,f),b.extend(g,{itemPreAddEl:"czr-module-wfc-pre-item-input-list",itemInputList:"czr-module-wfc-item-input-list"}),g.inputConstructor=a.CZRInput.extend(g.CZRWFCItemInputCtor||{}),g.itemConstructor=a.CZRItem.extend(g.CZRWFCItemCtor||{}),this.defaultItemModel=d.defaultModel,this.themeSelectorList=d.themeSelectorList,c.has(a,"czr_activeSectionId")&&g.control.section()==a.czr_activeSectionId()&&"resolved"!=g.isReady.state()&&g.ready(),a.section(g.control.section()).expanded.bind(function(){"resolved"!=g.isReady.state()&&g.ready()}),g.bind("pre-item-input-collection-ready",function(){g.setupPreItemInputs()});var h=function(){var e={};c.each(d.DefaultSettings,function(a,b){c.isEmpty(c.findWhere(g().items,{id:b}))&&(e[b]=a)});var f=b.extend(!0,{},d.defaultModel);f=c.omit("id",f),e.custom=f,e.custom.title=d.Translations.Custom,g.availableSelectors=g.availableSelectors||new a.Value,g.availableSelectors(e)};g.isReady.then(function(){h(),g.bind("before-pre-item-input-collection-setup",h),g.czr_Item.bind("add",h),g.czr_Item.bind("remove",h),g.czr_Item.bind("remove",function(){a.previewer.refresh()})});var i=g.control.section();if(a.section.has(i)&&a.section(i).notifications){var j=new a.Value(!1);a.previewer.bind("wfc-missing-selector",function(){j(!1)}),a.previewer.bind("wfc-missing-selector",c.debounce(function(b){if(j())a.section(i).notifications.remove("missing_selector_in_preview");else{j(!1);var e=g.czr_Item.has(b.id)?g.czr_Item(b.id)().title:"";a.section(i).notifications.add(new a.Notification("missing_selector_in_preview",{type:"warning",message:e+"=>"+d.Translations["This selector does not exist in this context."],dismissible:!0})),c.delay(function(){a.section(i).notifications.remove("missing_selector_in_preview")},5e3)}},1e3)),a.previewer.bind("wfc-selector-exists",function(){j(!0),a.section(i).notifications.remove("missing_selector_in_preview")})}try{g.styleSectionTitle({colors:["#4e8df4","#ec4d40","#fcc72d","#4eb369"],firstFamily:"[gfont]Bungee+Inline:regular",secondFamily:"[gfont]Pacifico:regular"})}catch(b){a.errorLog("Error when styling the section title when initializing module : "+g.id)}},validateItemBeforeAddition:function(e){var f=this,g=f.control.section();if("custom"==e.id&&(c.isEmpty(e.selector)||!c.isString(e.selector)))return void(a.section.has(g)&&a.section(g).notifications&&(a.section(g).notifications.add(new a.Notification("missing_selector",{type:"warning",message:d.Translations["Please specify a CSS selector"],dismissible:!0})),c.delay(function(){a.section(g).notifications.remove("missing_selector")},5e3)));if("custom"!=e.id&&e.id&&f.czr_Item&&f.czr_Item.has(e.id))return void(f.control.section&&!c.isUndefined(f.control.section.notifications)&&(a.section(g).notifications.add(new a.Notification("item_already_exists",{type:"info",message:d.Translations["This selector has already been added."],dismissible:!0})),c.delay(function(){a.section(g).notifications.remove("item_already_exists")},5e3)));try{b(e.selector)}catch(b){return void(a.section.has(g)&&a.section(g).notifications&&(a.section(g).notifications.add(new a.Notification("invalid_selector",{type:"warning",message:d.Translations["This css selector is not valid."],dismissible:!0})),c.delay(function(){a.section(g).notifications.remove("invalid_selector")},4e3)))}return e},setupPreItemInputs:function(){var b=this;!c.isUndefined(b.preItem.czr_Input)&&c.isObject(b.preItem.czr_Input)||a.errorLog("Missing input collection in the pre-item for module : "+b.id);var e=function(a){a=a||b.preItem.czr_Input("id")();var e="";return e=c.isEmpty(a)?b.preItem.czr_Input("title")():b.firstToUpperCase(a).replace(/_/g," "),d.DefaultSettings[a]?d.DefaultSettings[a].title&&!c.isEmpty(d.DefaultSettings[a].title)&&(e=d.DefaultSettings[a].title):"custom"==a&&(e=b.getCustomSelectorTitle(b.preItem.czr_Input("selector")())),e};b.preItem.czr_Input.each(function(a){switch(a.id){case"id":a.bind(function(c){b.preItem.czr_Input("title")(e(c)),b.preItem.czr_Input("selector").visible("custom"==a())});break;case"selector":a.bind(function(){b.preItem.czr_Input("title")(e())})}});var f=Object.keys(b.availableSelectors())[0];b.preItem.czr_Input("id")(f)},styleSectionTitle:function(b){b=c.extend({colors:["#4e8df4","#ec4d40","#fcc72d","#4eb369"],firstFamily:"[gfont]Bungee+Inline:regular",secondFamily:"[gfont]Pacifico:regular"},b);var d=this,e=a.section(d.control.section()),f=e.container.find(".accordion-section-title"),g=e.container.find(".customize-section-title h3");if(!(1>f.length&&1>g.length)){var h=e.params.title.split(" "),i=[],j=[];if(c.isArray(h)&&!(1>h[0].length)){for(var k=d.firstToUpperCase(h[0]).split(""),l=0,m=0;m<k.length;m++)l=l<b.colors.length?l:0,i.push('<span style="color:'+b.colors[l]+'">'+k[m]+"</span>"),l++;if(c.each(h,function(a,b){1>b?j.push(['<span class="wfc-first">',i.join(""),"</span>"].join("")):j.push(['<span class="wfc-second" style="font-size:1.2em;line-height:1.4em">',a,"</span>"].join(""))}),d.maybeLoadFont({family:b.firstFamily}),d.maybeLoadFont({family:b.secondFamily}),0<f.length){var n=f.find("span");f.html(j.join(" ")).append(n),f.find(".wfc-first").css(d.getInlineFontStyle(b.firstFamily)),f.find(".wfc-second").css(d.getInlineFontStyle(b.secondFamily))}if(0<g.length){var o=g.find("span");g.html(j.join(" ")).prepend(o),g.find(".wfc-first").css(d.getInlineFontStyle(b.firstFamily)),g.find(".wfc-second").css(d.getInlineFontStyle(b.secondFamily))}}}},firstToUpperCase:function(a){return a.substr(0,1).toUpperCase()+a.substr(1)},getInlineFontStyle:function(a){if(!c.isString(a)||c.isEmpty(a))return{};a=a.replace("[gfont]","").replace("[cfont]","");var b,d,e,f=this,g=a.split(":");return b=f.getFontFamilyName(a),d=g[1]?g[1].replace(/[^0-9.]+/g,""):400,d=c.isNumber(d)?d:400,e=g[1]&&-1!=g[1].indexOf("italic")?"italic":"",{"font-family":"none"==b?"inherit":b.replace(/[+|:]/g," "),"font-weight":d||400,"font-style":e||"normal"}},getFontFamilyName:function(a){if(!c.isString(a)||c.isEmpty(a))return a;a=a.replace("[gfont]","").replace("[cfont]","");var b=a.split(":");return c.isString(b[0])?b[0].replace(/[+|:]/g," "):""},isCustomSelectorId:function(a){if(c.isString(a))return!c.has(d.DefaultSettings,a)},getCustomSelectorTitle:function(a){return c.isString(a)&&!c.isEmpty(a)?[d.Translations.Custom,":",a].join(" "):d.Translations.Custom},maybeLoadFont:function(a){var d=b.Deferred(),e=this;if(!c.isString(a.family)||-1==a.family.indexOf("[gfont]"))return d.resolve().promise();a=c.extend({family:"",subset:null,fontClass:a.family.replace(/[^A-Za-z0-9\s!?]/g,"").replace(/\s/g,"-"),text:null,waitFontLoaded:!1},a||{}),a.family=a.family.replace("[gfont]","").replace("[cfont]","");var f=[];return f.push("//fonts.googleapis.com/css?family="),f.push(a.family),c.isUndefined(a.subset)||c.isNull(a.subset)||"all-subsets"==a.subset||f.push("&subset="+a.subset),a.waitFontLoaded?document.fonts&&!c.isUndefined(document.fonts.onloadingdone)?document.fonts.onloadingdone=function(){document.fonts.check("1em "+e.getFontFamilyName(a.family))?d.resolve():c.delay(function(){d.resolve()},200)}:c.delay(function(){d.resolve()},200):c.delay(function(){d.resolve()},50),0===b("link."+a.fontClass).length?b("link:last").after('<link class="'+a.fontClass+'" href="'+f.join("")+'" rel="stylesheet" type="text/css">'):b("link."+a.fontClass).attr("href",f.join("")),d.promise()}})}(wp.customize,jQuery,_,TCFontAdmin);var CZRWFCModuleMths=CZRWFCModuleMths||{};!function(a,b,c,d){b.extend(CZRWFCModuleMths,{CZRWFCItemInputCtor:{setupSelect:function(){var e=this;switch(e.id){case"id":e._setupSelectForPreItemSelectorId();break;case"subset":e._setupSelectForSubset();break;case"font-family":e._setupSelectForFontFamily();break;case"static-effect":case"font-weight":case"font-style":case"text-align":case"text-decoration":case"text-transform":var f=e.input_parent,g={},h=f();d.selectOptionLists&&d.selectOptionLists[e.id]?g=d.selectOptionLists[e.id]:a.consoleLog("CZRWFCItemInputCtor::setupSelect => missing option list for "+e.id);var i=function(a,d){a=c.isArray(a)?a[0]:a;var f=c.isEmpty(a)?d:a,g={value:d,html:f};d==h[e.id]&&b.extend(g,{selected:"selected"}),b('select[data-czrtype="'+e.id+'"]',e.container).append(b("<option>",g))};"static-effect"!=e.id&&i(d.Translations.Select,"_not_set_"),c.each(g,i),b('select[data-czrtype="'+e.id+'"]',e.container).selecter()}},_setupSelectForPreItemSelectorId:function(){var a=this,e=a.module,f={};f=b.extend(!0,{},e.availableSelectors());var g=!1,h=function(a){var b="";return c.each(a,function(a,d){var f="";f=c.isString(a.title)&&!c.isEmpty(a.title)?a.title:e.firstToUpperCase(d).replace(/_/g," "),g?b+='<option value="'+d+'">'+f+"</option>":(b+='<option selected="selected" value="'+d+'">'+f+"</option>",g=!0)}),b};c.each([{title:d.Translations["Pre-defined selectors"],list:c.omit(f,"custom")},{title:d.Translations["Define a custom selector"],list:{custom:{title:f.custom.title}}}],function(c){var d=b("<optgroup>",{label:c.title,html:h(c.list)});b('select[data-czrtype="'+a.id+'"]',a.container).append(d)}),b('select[data-czrtype="'+a.id+'"]',a.container).selecter()},_setupSelectForFontFamily:function(){var a=this;a._preprocessSelect2ForFontFamily().done(function(b){a._setupSelectForFontFamilySelector(b)})},_setupSelectForFontFamilySelector:function(a){var e=this,f=e.input_parent,g=f(),h=function(){var a=f.czr_Input("subset")(),b=c.filter(d.fontCollection.gfonts,function(b){return b.subsets&&c.contains(b.subsets,a)});return c.isUndefined(a)||c.isNull(a)||"all-subsets"==a?d.fontCollection.gfonts:b},i=b('select[data-czrtype="'+e.id+'"]',e.container),j=function(a,b){var d="";return c.each(a,function(a){var e=a.name,f=c.isString(e)?e.replace(/[+|:]/g," "):e;e=function(a,b){return c.isString(a)?["[",b,"]",a].join(""):""}(e,b),e==g["font-family"]?d+='<option selected="selected" value="'+e+'">'+f+"</option>":d+='<option value="'+e+'">'+f+"</option>"}),d};c.isNull(g["font-family"])||c.isEmpty(g["font-family"])?i.append('<option value="none" selected="selected">'+d.Translations["Select a font family"]+"</option>"):i.append('<option value="none">'+d.Translations["Select a font family"]+"</option>"),c.each([{title:d.Translations["Web Safe Fonts"],type:"cfont",list:d.fontCollection.cfonts},{title:d.Translations["Google Fonts"],type:"gfont",list:h()}],function(a){var c=b("<optgroup>",{label:a.title,html:j(a.list,a.type)});i.append(c)});var k={escapeMarkup:function(a){return a}};a&&b.extend(k,{resultsAdapter:a,closeOnSelect:!1}),i.czrSelect2(k),b(".czrSelect2-selection__rendered",e.container).css(e.module.getInlineFontStyle(e()))},_preprocessSelect2ForFontFamily:function(){var a=b.Deferred();return void 0!==b.fn.czrSelect2&&void 0!==b.fn.czrSelect2.amd&&"function"==typeof b.fn.czrSelect2.amd.require?b.fn.czrSelect2.amd.require(["czrSelect2/results","czrSelect2/utils"],function(b,c){var d=function(a,b,c){d.__super__.constructor.call(this,a,b,c)};c.Extend(d,b),d.prototype.bind=function(a,b){var c=this;a.on("results:focus",function(a){"true"!=a.element.attr("aria-selected")&&c.trigger("select",{data:a.data})}),d.__super__.bind.call(this,a,b)},a.resolve(d)}):a.resolve(!1),a.promise()},_setupSelectForSubset:function(){var a=this,e=a.input_parent,f={},g=e();f=d.fontCollection.subsets,c.each(f,function(d,e){var f=c.isEmpty(d)?e:d,h={value:e,html:a.module.firstToUpperCase(f)};e==g[a.id]&&b.extend(h,{selected:"selected"}),b('select[data-czrtype="'+a.id+'"]',a.container).append(b("<option>",h))}),b('select[data-czrtype="'+a.id+'"]',a.container).selecter()}}})}(wp.customize,jQuery,_,TCFontAdmin);var CZRWFCModuleMths=CZRWFCModuleMths||{};!function(a,b,c){b.extend(CZRWFCModuleMths,{CZRWFCItemCtor:{ready:function(){var d=this;a.CZRItem.prototype.ready.call(d),d.callbacks.add(function(e){var f=d.module.control.section();try{b(d().selector),a.previewer.send("wfc_joy",{id:d.id,data:e})}catch(b){return void(a.section.has(f)&&a.section(f).notifications&&a.section(f).notifications.add(new a.Notification(e.id+"_invalid_selector",{type:"info",message:[e.title,"=>",TCFontAdmin.Translations["Make sure to use valid css selectors."]].join(" "),dismissible:!0})))}if(c.isEmpty(e.selector)&&a.section.has(f)&&a.section(f).notifications)return void a.section(f).notifications.add(new a.Notification(e.id+"_invalid_selector",{type:"info",message:[e.title,"=>",TCFontAdmin.Translations["Make sure to use valid css selectors."]].join(" "),dismissible:!0}));a.section.has(f)&&a.section(f).notifications&&a.section(f).notifications.remove(e.id+"_invalid_selector")}),d.czr_Input.bind("add",function(a){switch(a.id){case"font-family":a.bind(function(c){d.writeItemViewTitle(),b(".czrSelect2-selection__rendered",a.container).css(a.module.getInlineFontStyle(c))});break;case"subset":a.bind(function(a){d.subsetChangeReact(a)});break;case"static-effect":var e=TCFontAdmin.selectOptionLists["static-effect"];a.bind(function(a){d.writeItemViewTitle();var b;b=c.has(e,a)&&e[a][2]&&c.isString(e[a][2])?-1==e[a][2].indexOf("#")?"#000000":e[a][2]:"#000000",d.czr_Input("color")(b),d.czr_Input("color").container.find("input").trigger("change")});break;case"selector":a.bind(function(){d.writeItemViewTitle()});break;case"customized":d.callbacks.add(function(a,e,f){if("customized"!=f.input_changed){var g=b.extend(!0,[],d.czr_Input("customized")());g=c.isArray(g)?g:[],f.input_changed&&!c.contains(g,f.input_changed)&&g.push(f.input_changed),d.czr_Input("customized")(g)}})}}),d.bind("remove-dialog-rendered",function(){b("."+d.module.control.css_attr.remove_alert_wrapper,d.container).find("p").html(TCFontAdmin.Translations["Please confirm the removal of the customizations for"]+" : <i>"+d().title+"</i>")}),d.viewState.callbacks.add(function(b){"closed"!=b&&a.previewer.send("wfc_check_if_selector_exists",{id:d.id,data:d()})})},validateItemModelOnInitialize:function(a){if(!c.isObject(a)||c.isEmpty(a))throw new Error("ItemCtor::validateItemModelOnInitialize : model candidate is not properly formed.");var b=[];a.id&&c.isObject(TCFontAdmin.DefaultSettings)&&(b=c.filter(TCFontAdmin.DefaultSettings,function(b,c){return a.id==c}),c.isArray(b)&&!c.isEmpty(b)&&(b=b[0]));var d=function(b){return a.customized=c.isArray(a.customized)?a.customized:[],c.contains(a.customized,b)},e={};return c.each(a,function(a,f){if(e[f]=a,!d(f))switch(f){case"selector":c.has(b,f)&&!c.isNull(b[f])&&(e[f]=b[f]);break;case"color":case"color-hover":e[f]=TCFontAdmin.defaultModel[f];break;case"font-size":case"line-height":e[f]=a,!c.isNumber(e[f])&&c.isString(e[f])&&(e[f]=+e[f].replace(/[^0-9.]+/g,"")),c.isNumber(e[f])||(e[f]=TCFontAdmin.defaultModel[f]);break;default:e[f]=a}}),e},subsetChangeReact:function(a){var b=this,d=b.czr_Input("font-family");d.container.find("select").czrSelect2("destroy").empty(),c.delay(function(){if(d._setupSelectForFontFamily(),c.isString(d())&&!c.isEmpty(d())){var e,f=d().replace("[gfont]","").replace("[cfont]",""),g=b.czr_Input("font-family")();if(!c.isUndefined(a)&&!c.isNull(a)&&"all-subsets"!=a){if(e=c.find(TCFontAdmin.fontCollection.gfonts,function(a){return a.name.substr(0,f.length)==f}),!c.isObject(e)||c.isUndefined(e.subsets))return;if(c.contains(e.subsets,a))return;var h=c.first(c.filter(TCFontAdmin.fontCollection.gfonts,function(b){return b.subsets&&c.contains(b.subsets,a)}));!c.isObject(h)||c.isUndefined(h.name)?g=TCFontAdmin.defaultModel["font-family"]:(h=h.name,g=!c.isString(h)||c.isEmpty(h)?TCFontAdmin.defaultModel["font-family"]:"[gfont]"+h),b.czr_Input("font-family")(g),d.container.find("select").trigger("change")}}},200)},writeItemViewTitle:function(d){var e=this,f=e.module,g=d||e(),h=f.firstToUpperCase(g.id).replace(/_/g," "),i=g["font-family"];!c.isEmpty(g.title)&&c.isString(g.title)&&(h=a.CZR_Helpers.capitalize(g.title)),c.debounce(function(){f.isCustomSelectorId(e().id)&&(h=f.getCustomSelectorTitle(g.selector)),h=a.CZR_Helpers.truncate(h,30),e.module.maybeLoadFont({family:i,subset:e().subset,fontClass:"wfc_google_font_"+e.id}).done(function(){var a=b("."+f.control.css_attr.item_title,e.container).find("h4").html("").append(b("<span>",{html:h}).css(f.getInlineFontStyle(i)));a.find("span").addClass("font-effect-"+g["static-effect"]),c.contains(g.customized,"color")&&a.find("span").css("color",g.color)}),a.CZR_Helpers.doActions("after_writeViewTitle",e.container,g,e)},300)()}}})}(wp.customize,jQuery,_),function(a,b){a.czrModuleMap=a.czrModuleMap||{},b.extend(a.czrModuleMap,{czr_wfc_module:{mthds:CZRWFCModuleMths,crud:!0,name:"Font Customizer",has_mod_opt:!1}})}(wp.customize,jQuery);var CZRWFCModuleMths=CZRWFCModuleMths||{};!function(a,b,c,d){b.extend(CZRWFCModuleMths,{initialize:function(e,f){var g=this;g.initialConstrucOptions=b.extend(!0,{},f),a.CZRDynModule.prototype.initialize.call(g,e,f),b.extend(g,{itemPreAddEl:"czr-module-wfc-pre-item-input-list",itemInputList:"czr-module-wfc-item-input-list"}),g.inputConstructor=a.CZRInput.extend(g.CZRWFCItemInputCtor||{}),g.itemConstructor=a.CZRItem.extend(g.CZRWFCItemCtor||{}),this.defaultItemModel=d.defaultModel,this.themeSelectorList=d.themeSelectorList,c.has(a,"czr_activeSectionId")&&g.control.section()==a.czr_activeSectionId()&&"resolved"!=g.isReady.state()&&g.ready(),a.section(g.control.section()).expanded.bind(function(){"resolved"!=g.isReady.state()&&g.ready()}),g.bind("pre-item-input-collection-ready",function(){g.setupPreItemInputs()});var h=function(){var e={};c.each(d.DefaultSettings,function(a,b){c.isEmpty(c.findWhere(g().items,{id:b}))&&(e[b]=a)});var f=b.extend(!0,{},d.defaultModel);f=c.omit("id",f),e.custom=f,e.custom.title=d.Translations.Custom,g.availableSelectors=g.availableSelectors||new a.Value,g.availableSelectors(e)};g.isReady.then(function(){h(),g.bind("before-pre-item-input-collection-setup",h),g.czr_Item.bind("add",h),g.czr_Item.bind("remove",h),g.czr_Item.bind("remove",function(){a.previewer.refresh()})});var i=g.control.section();if(a.section.has(i)&&a.section(i).notifications){var j=new a.Value(!1);a.previewer.bind("wfc-missing-selector",function(){j(!1)}),a.previewer.bind("wfc-missing-selector",c.debounce(function(b){if(j())a.section(i).notifications.remove("missing_selector_in_preview");else{j(!1);var e=g.czr_Item.has(b.id)?g.czr_Item(b.id)().title:"";a.section(i).notifications.add(new a.Notification("missing_selector_in_preview",{type:"warning",message:e+"=>"+d.Translations["This selector does not exist in this context."],dismissible:!0})),c.delay(function(){a.section(i).notifications.remove("missing_selector_in_preview")},5e3)}},1e3)),a.previewer.bind("wfc-selector-exists",function(){j(!0),a.section(i).notifications.remove("missing_selector_in_preview")})}try{g.styleSectionTitle({colors:["#4e8df4","#ec4d40","#fcc72d","#4eb369"],firstFamily:"[gfont]Bungee+Inline:regular",secondFamily:"[gfont]Pacifico:regular"})}catch(b){a.errorLog("Error when styling the section title when initializing module : "+g.id)}},validateItemBeforeAddition:function(e){var f=this,g=f.control.section();if("custom"==e.id&&(c.isEmpty(e.selector)||!c.isString(e.selector)))return void(a.section.has(g)&&a.section(g).notifications&&(a.section(g).notifications.add(new a.Notification("missing_selector",{type:"warning",message:d.Translations["Please specify a CSS selector"],dismissible:!0})),c.delay(function(){a.section(g).notifications.remove("missing_selector")},5e3)));if("custom"!=e.id&&e.id&&f.czr_Item&&f.czr_Item.has(e.id))return void(f.control.section&&!c.isUndefined(f.control.section.notifications)&&(a.section(g).notifications.add(new a.Notification("item_already_exists",{type:"info",message:d.Translations["This selector has already been added."],dismissible:!0})),c.delay(function(){a.section(g).notifications.remove("item_already_exists")},5e3)));try{b(e.selector)}catch(b){return void(a.section.has(g)&&a.section(g).notifications&&(a.section(g).notifications.add(new a.Notification("invalid_selector",{type:"warning",message:d.Translations["This css selector is not valid."],dismissible:!0})),c.delay(function(){a.section(g).notifications.remove("invalid_selector")},4e3)))}return e},setupPreItemInputs:function(){var b=this;!c.isUndefined(b.preItem.czr_Input)&&c.isObject(b.preItem.czr_Input)||a.errorLog("Missing input collection in the pre-item for module : "+b.id);var e=function(a){a=a||b.preItem.czr_Input("id")();var e="";return e=c.isEmpty(a)?b.preItem.czr_Input("title")():b.firstToUpperCase(a).replace(/_/g," "),d.DefaultSettings[a]?d.DefaultSettings[a].title&&!c.isEmpty(d.DefaultSettings[a].title)&&(e=d.DefaultSettings[a].title):"custom"==a&&(e=b.getCustomSelectorTitle(b.preItem.czr_Input("selector")())),e};b.preItem.czr_Input.each(function(a){switch(a.id){case"id":a.bind(function(c){b.preItem.czr_Input("title")(e(c)),b.preItem.czr_Input("selector").visible("custom"==a())});break;case"selector":a.bind(function(){b.preItem.czr_Input("title")(e())})}});var f=Object.keys(b.availableSelectors())[0];b.preItem.czr_Input("id")(f)},styleSectionTitle:function(b){b=c.extend({colors:["#4e8df4","#ec4d40","#fcc72d","#4eb369"],firstFamily:"[gfont]Bungee+Inline:regular",secondFamily:"[gfont]Pacifico:regular"},b);var d=this,e=a.section(d.control.section()),f=e.container.find(".accordion-section-title"),g=e.container.find(".customize-section-title h3");if(!(1>f.length&&1>g.length)){var h=e.params.title.split(" "),i=[],j=[];if(c.isArray(h)&&!(1>h[0].length)){for(var k=d.firstToUpperCase(h[0]).split(""),l=0,m=0;m<k.length;m++)l=l<b.colors.length?l:0,i.push('<span style="color:'+b.colors[l]+'">'+k[m]+"</span>"),l++;if(c.each(h,function(a,b){1>b?j.push(['<span class="wfc-first">',i.join(""),"</span>"].join("")):j.push(['<span class="wfc-second" style="font-size:1.2em;line-height:1.4em">',a,"</span>"].join(""))}),d.maybeLoadFont({family:b.firstFamily}),d.maybeLoadFont({family:b.secondFamily}),0<f.length){var n=f.find("span");f.html(j.join(" ")).append(n),f.find(".wfc-first").css(d.getInlineFontStyle(b.firstFamily)),f.find(".wfc-second").css(d.getInlineFontStyle(b.secondFamily))}if(0<g.length){var o=g.find("span");g.html(j.join(" ")).prepend(o),g.find(".wfc-first").css(d.getInlineFontStyle(b.firstFamily)),g.find(".wfc-second").css(d.getInlineFontStyle(b.secondFamily))}}}},firstToUpperCase:function(a){return a.substr(0,1).toUpperCase()+a.substr(1)},getInlineFontStyle:function(a){if(!c.isString(a)||c.isEmpty(a))return{};a=a.replace("[gfont]","").replace("[cfont]","");var b,d,e,f=this,g=a.split(":");return b=f.getFontFamilyName(a),d=g[1]?g[1].replace(/[^0-9.]+/g,""):400,d=c.isNumber(d)?d:400,e=g[1]&&-1!=g[1].indexOf("italic")?"italic":"",{"font-family":"none"==b?"inherit":b.replace(/[+|:]/g," "),"font-weight":d||400,"font-style":e||"normal"}},getFontFamilyName:function(a){if(!c.isString(a)||c.isEmpty(a))return a;a=a.replace("[gfont]","").replace("[cfont]","");var b=a.split(":");return c.isString(b[0])?b[0].replace(/[+|:]/g," "):""},isCustomSelectorId:function(a){if(c.isString(a))return!c.has(d.DefaultSettings,a)},getCustomSelectorTitle:function(a){return c.isString(a)&&!c.isEmpty(a)?[d.Translations.Custom,":",a].join(" "):d.Translations.Custom},maybeLoadFont:function(a){var d=b.Deferred(),e=this;if(!c.isString(a.family)||-1==a.family.indexOf("[gfont]"))return d.resolve().promise();a=c.extend({family:"",subset:null,fontClass:a.family.replace(/[^A-Za-z0-9\s!?]/g,"").replace(/\s/g,"-"),text:null,waitFontLoaded:!1},a||{}),a.family=a.family.replace("[gfont]","").replace("[cfont]","");var f=[];return f.push("//fonts.googleapis.com/css?family="),f.push(a.family),c.isUndefined(a.subset)||c.isNull(a.subset)||"all-subsets"==a.subset||f.push("&subset="+a.subset),a.waitFontLoaded?document.fonts&&!c.isUndefined(document.fonts.onloadingdone)?document.fonts.onloadingdone=function(){document.fonts.check("1em "+e.getFontFamilyName(a.family))?d.resolve():c.delay(function(){d.resolve()},200)}:c.delay(function(){d.resolve()},200):c.delay(function(){d.resolve()},50),0===b("link."+a.fontClass).length?b("link:last").after('<link class="'+a.fontClass+'" href="'+f.join("")+'" rel="stylesheet" type="text/css">'):b("link."+a.fontClass).attr("href",f.join("")),d.promise()}})}(wp.customize,jQuery,_,TCFontAdmin);var CZRWFCModuleMths=CZRWFCModuleMths||{};!function(a,b,c,d){b.extend(CZRWFCModuleMths,{CZRWFCItemInputCtor:{setupSelect:function(){var e=this;switch(e.id){case"id":e._setupSelectForPreItemSelectorId();break;case"subset":e._setupSelectForSubset();break;case"font-family":e._setupSelectForFontFamily();break;case"static-effect":case"font-weight":case"font-style":case"text-align":case"text-decoration":case"text-transform":var f=e.input_parent,g={},h=f();d.selectOptionLists&&d.selectOptionLists[e.id]?g=d.selectOptionLists[e.id]:a.consoleLog("CZRWFCItemInputCtor::setupSelect => missing option list for "+e.id);var i=function(a,d){a=c.isArray(a)?a[0]:a;var f=c.isEmpty(a)?d:a,g={value:d,html:f};d==h[e.id]&&b.extend(g,{selected:"selected"}),b('select[data-czrtype="'+e.id+'"]',e.container).append(b("<option>",g))};"static-effect"!=e.id&&i(d.Translations.Select,"_not_set_"),c.each(g,i),b('select[data-czrtype="'+e.id+'"]',e.container).selecter()}},_setupSelectForPreItemSelectorId:function(){var a=this,e=a.module,f={};f=b.extend(!0,{},e.availableSelectors());var g=!1,h=function(a){var b="";return c.each(a,function(a,d){var f="";f=c.isString(a.title)&&!c.isEmpty(a.title)?a.title:e.firstToUpperCase(d).replace(/_/g," "),g?b+='<option value="'+d+'">'+f+"</option>":(b+='<option selected="selected" value="'+d+'">'+f+"</option>",g=!0)}),b};c.each([{title:d.Translations["Pre-defined selectors"],list:c.omit(f,"custom")},{title:d.Translations["Define a custom selector"],list:{custom:{title:f.custom.title}}}],function(c){var d=b("<optgroup>",{label:c.title,html:h(c.list)});b('select[data-czrtype="'+a.id+'"]',a.container).append(d)}),b('select[data-czrtype="'+a.id+'"]',a.container).selecter()},_setupSelectForFontFamily:function(){var a=this;a._preprocessSelect2ForFontFamily().done(function(b){a._setupSelectForFontFamilySelector(b)})},_setupSelectForFontFamilySelector:function(a){var e=this,f=e.input_parent,g=f(),h=function(){var a=f.czr_Input("subset")(),b=c.filter(d.fontCollection.gfonts,function(b){return b.subsets&&c.contains(b.subsets,a)});return c.isUndefined(a)||c.isNull(a)||"all-subsets"==a?d.fontCollection.gfonts:b},i=b('select[data-czrtype="'+e.id+'"]',e.container),j=function(a,b){var d="";return c.each(a,function(a){var e=a.name,f=c.isString(e)?e.replace(/[+|:]/g," "):e;e=function(a,b){return c.isString(a)?["[",b,"]",a].join(""):""}(e,b),e==g["font-family"]?d+='<option selected="selected" value="'+e+'">'+f+"</option>":d+='<option value="'+e+'">'+f+"</option>"}),d};c.isNull(g["font-family"])||c.isEmpty(g["font-family"])?i.append('<option value="none" selected="selected">'+d.Translations["Select a font family"]+"</option>"):i.append('<option value="none">'+d.Translations["Select a font family"]+"</option>"),c.each([{title:d.Translations["Web Safe Fonts"],type:"cfont",list:d.fontCollection.cfonts},{title:d.Translations["Google Fonts"],type:"gfont",list:h()}],function(a){var c=b("<optgroup>",{label:a.title,html:j(a.list,a.type)});i.append(c)});var k={escapeMarkup:function(a){return a}};a&&b.extend(k,{resultsAdapter:a,closeOnSelect:!1}),i.czrSelect2(k),b(".czrSelect2-selection__rendered",e.container).css(e.module.getInlineFontStyle(e()))},_preprocessSelect2ForFontFamily:function(){var a=b.Deferred();return void 0!==b.fn.czrSelect2&&void 0!==b.fn.czrSelect2.amd&&"function"==typeof b.fn.czrSelect2.amd.require?b.fn.czrSelect2.amd.require(["czrSelect2/results","czrSelect2/utils"],function(b,c){var d=function(a,b,c){d.__super__.constructor.call(this,a,b,c)};c.Extend(d,b),d.prototype.bind=function(a,b){var c=this;a.on("results:focus",function(a){"true"!=a.element.attr("aria-selected")&&c.trigger("select",{data:a.data})}),d.__super__.bind.call(this,a,b)},a.resolve(d)}):a.resolve(!1),a.promise()},_setupSelectForSubset:function(){var a=this,e=a.input_parent,f={},g=e();f=d.fontCollection.subsets,c.each(f,function(d,e){var f=c.isEmpty(d)?e:d,h={value:e,html:a.module.firstToUpperCase(f)};e==g[a.id]&&b.extend(h,{selected:"selected"}),b('select[data-czrtype="'+a.id+'"]',a.container).append(b("<option>",h))}),b('select[data-czrtype="'+a.id+'"]',a.container).selecter()}}})}(wp.customize,jQuery,_,TCFontAdmin);var CZRWFCModuleMths=CZRWFCModuleMths||{};!function(a,b,c){b.extend(CZRWFCModuleMths,{CZRWFCItemCtor:{ready:function(){var d=this;a.CZRItem.prototype.ready.call(d),d.callbacks.add(function(e){var f=d.module.control.section();try{b(d().selector),a.previewer.send("wfc_joy",{id:d.id,data:e})}catch(b){return void(a.section.has(f)&&a.section(f).notifications&&a.section(f).notifications.add(new a.Notification(e.id+"_invalid_selector",{type:"info",message:[e.title,"=>",TCFontAdmin.Translations["Make sure to use valid css selectors."]].join(" "),dismissible:!0})))}if(c.isEmpty(e.selector)&&a.section.has(f)&&a.section(f).notifications)return void a.section(f).notifications.add(new a.Notification(e.id+"_invalid_selector",{type:"info",message:[e.title,"=>",TCFontAdmin.Translations["Make sure to use valid css selectors."]].join(" "),dismissible:!0}));a.section.has(f)&&a.section(f).notifications&&a.section(f).notifications.remove(e.id+"_invalid_selector")}),d.czr_Input.bind("add",function(a){switch(a.id){case"font-family":a.bind(function(c){d.writeItemViewTitle(),b(".czrSelect2-selection__rendered",a.container).css(a.module.getInlineFontStyle(c))});break;case"subset":a.bind(function(a){d.subsetChangeReact(a)});break;case"static-effect":var e=TCFontAdmin.selectOptionLists["static-effect"];a.bind(function(a){d.writeItemViewTitle();var b;b=c.has(e,a)&&e[a][2]&&c.isString(e[a][2])?-1==e[a][2].indexOf("#")?"#000000":e[a][2]:"#000000",d.czr_Input("color")(b),d.czr_Input("color").container.find("input").trigger("change")});break;case"selector":a.bind(function(){d.writeItemViewTitle()});break;case"customized":d.callbacks.add(function(a,e,f){if("customized"!=f.input_changed){var g=b.extend(!0,[],d.czr_Input("customized")());g=c.isArray(g)?g:[],f.input_changed&&!c.contains(g,f.input_changed)&&g.push(f.input_changed),d.czr_Input("customized")(g)}})}}),d.bind("remove-dialog-rendered",function(){b("."+d.module.control.css_attr.remove_alert_wrapper,d.container).find("p").html(TCFontAdmin.Translations["Please confirm the removal of the customizations for"]+" : <i>"+d().title+"</i>")}),d.viewState.callbacks.add(function(b){"closed"!=b&&a.previewer.send("wfc_check_if_selector_exists",{id:d.id,data:d()})})},validateItemModelOnInitialize:function(a){if(!c.isObject(a)||c.isEmpty(a))throw new Error("ItemCtor::validateItemModelOnInitialize : model candidate is not properly formed.");var b=[];a.id&&c.isObject(TCFontAdmin.DefaultSettings)&&(b=c.filter(TCFontAdmin.DefaultSettings,function(b,c){return a.id==c}),c.isArray(b)&&!c.isEmpty(b)&&(b=b[0]));var d=function(b){return a.customized=c.isArray(a.customized)?a.customized:[],c.contains(a.customized,b)},e={};return c.each(a,function(a,f){if(e[f]=a,!d(f))switch(f){case"selector":c.has(b,f)&&!c.isNull(b[f])&&(e[f]=b[f]);break;case"color":case"color-hover":e[f]=TCFontAdmin.defaultModel[f];break;case"font-size":case"line-height":e[f]=a,!c.isNumber(e[f])&&c.isString(e[f])&&(e[f]=+e[f].replace(/[^0-9.]+/g,"")),c.isNumber(e[f])||(e[f]=TCFontAdmin.defaultModel[f]);break;default:e[f]=a}}),e},subsetChangeReact:function(a){var b=this,d=b.czr_Input("font-family");d.container.find("select").czrSelect2("destroy").empty(),c.delay(function(){if(d._setupSelectForFontFamily(),c.isString(d())&&!c.isEmpty(d())){var e,f=d().replace("[gfont]","").replace("[cfont]",""),g=b.czr_Input("font-family")();if(!c.isUndefined(a)&&!c.isNull(a)&&"all-subsets"!=a){if(e=c.find(TCFontAdmin.fontCollection.gfonts,function(a){return a.name.substr(0,f.length)==f}),!c.isObject(e)||c.isUndefined(e.subsets))return;if(c.contains(e.subsets,a))return
;var h=c.first(c.filter(TCFontAdmin.fontCollection.gfonts,function(b){return b.subsets&&c.contains(b.subsets,a)}));!c.isObject(h)||c.isUndefined(h.name)?g=TCFontAdmin.defaultModel["font-family"]:(h=h.name,g=!c.isString(h)||c.isEmpty(h)?TCFontAdmin.defaultModel["font-family"]:"[gfont]"+h),b.czr_Input("font-family")(g),d.container.find("select").trigger("change")}}},200)},writeItemViewTitle:function(d){var e=this,f=e.module,g=d||e(),h=f.firstToUpperCase(g.id).replace(/_/g," "),i=g["font-family"];!c.isEmpty(g.title)&&c.isString(g.title)&&(h=a.CZR_Helpers.capitalize(g.title)),c.debounce(function(){f.isCustomSelectorId(e().id)&&(h=f.getCustomSelectorTitle(g.selector)),h=a.CZR_Helpers.truncate(h,30),e.module.maybeLoadFont({family:i,subset:e().subset,fontClass:"wfc_google_font_"+e.id}).done(function(){var a=b("."+f.control.css_attr.item_title,e.container).find("h4").html("").append(b("<span>",{html:h}).css(f.getInlineFontStyle(i)));a.find("span").addClass("font-effect-"+g["static-effect"]),c.contains(g.customized,"color")&&a.find("span").css("color",g.color)}),a.CZR_Helpers.doActions("after_writeViewTitle",e.container,g,e)},300)()}}})}(wp.customize,jQuery,_),function(a,b){a.czrModuleMap=a.czrModuleMap||{},b.extend(a.czrModuleMap,{czr_wfc_module:{mthds:CZRWFCModuleMths,crud:!0,name:"Font Customizer",has_mod_opt:!1}})}(wp.customize,jQuery);