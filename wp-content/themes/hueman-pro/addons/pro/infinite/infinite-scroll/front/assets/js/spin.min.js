!function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Spinner=e()}(this,function(){"use strict";var t,e=["webkit","Moz","ms","O"],i={};function o(t,e){var i,o=document.createElement(t||"div");for(i in e)o[i]=e[i];return o}function r(t){for(var e=1,i=arguments.length;e<i;e++)t.appendChild(arguments[e]);return t}var n,s=(n=o("style",{type:"text/css"}),r(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet);function a(t,i){var o,r,n=t.style;if(void 0!==n[i])return i;for(i=i.charAt(0).toUpperCase()+i.slice(1),r=0;r<e.length;r++)if(void 0!==n[o=e[r]+i])return o}function l(t,e){for(var i in e)t.style[a(t,i)||i]=e[i];return t}function d(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)void 0===t[o]&&(t[o]=i[o])}return t}function f(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}var p={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};function c(t){if(void 0===this)return new c(t);this.opts=d(t||{},c.defaults,p)}c.defaults={},d(c.prototype,{spin:function(e){this.stop();var i,r,n=this,s=n.opts,a=n.el=l(o(0,{className:s.className}),{position:s.position,width:0,zIndex:s.zIndex}),d=s.radius+s.length+s.width;if(e&&(e.insertBefore(a,e.firstChild||null),r=f(e),i=f(a),l(a,{left:("auto"==s.left?r.x-i.x+(e.offsetWidth>>1):parseInt(s.left,10)+d)+"px",top:("auto"==s.top?r.y-i.y+(e.offsetHeight>>1):parseInt(s.top,10)+d)+"px"})),a.setAttribute("role","progressbar"),n.lines(a,n.opts),!t){var p,c=0,u=(s.lines-1)*(1-s.direction)/2,h=s.fps,v=h/s.speed,y=(1-s.opacity)/(v*s.trail/100),m=v/s.lines;!function t(){c++;for(var e=0;e<s.lines;e++)p=Math.max(1-(c+(s.lines-e)*m)%v*y,s.opacity),n.opacity(a,e*s.direction+u,p,s);n.timeout=n.el&&setTimeout(t,~~(1e3/h))}()}return n},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(e,n){var a,d,f,p,c,u,h,v,y,m,g=0,x=(n.lines-1)*(1-n.direction)/2;function w(t,e){return l(o(),{position:"absolute",width:n.length+n.width+"px",height:n.width+"px",background:t,boxShadow:e,transformOrigin:"left",transform:"rotate("+~~(360/n.lines*g+n.rotate)+"deg) translate("+n.radius+"px,0)",borderRadius:(n.corners*n.width>>1)+"px"})}for(;g<n.lines;g++)a=l(o(),{position:"absolute",top:1+~(n.width/2)+"px",transform:n.hwaccel?"translate3d(0,0,0)":"",opacity:n.opacity,animation:t&&(d=n.opacity,f=n.trail,p=x+g*n.direction,c=n.lines,void 0,void 0,void 0,void 0,void 0,u=["opacity",f,~~(100*d),p,c].join("-"),h=.01+p/c*100,v=Math.max(1-(1-d)/f*(100-h),d),y=t.substring(0,t.indexOf("Animation")).toLowerCase(),m=y&&"-"+y+"-"||"",i[u]||(s.insertRule("@"+m+"keyframes "+u+"{0%{opacity:"+v+"}"+h+"%{opacity:"+d+"}"+(h+.01)+"%{opacity:1}"+(h+f)%100+"%{opacity:"+d+"}100%{opacity:"+v+"}}",s.cssRules.length),i[u]=1),u+" "+1/n.speed+"s linear infinite")}),n.shadow&&r(a,l(w("#000","0 0 4px #000"),{top:"2px"})),r(e,r(a,w(n.color,"0 0 1px rgba(0,0,0,.1)")));return e},opacity:function(t,e,i){e<t.childNodes.length&&(t.childNodes[e].style.opacity=i)}});var u=l(o("group"),{behavior:"url(#default#VML)"});return!a(u,"transform")&&u.adj?function(){function t(t,e){return o("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e)}s.addRule(".spin-vml","behavior:url(#default#VML)"),c.prototype.lines=function(e,i){var o=i.length+i.width,n=2*o;function s(){return l(t("group",{coordsize:n+" "+n,coordorigin:-o+" "+-o}),{width:n,height:n})}var a,d=2*-(i.width+i.length)+"px",f=l(s(),{position:"absolute",top:d,left:d});function p(e,n,a){r(f,r(l(s(),{rotation:360/i.lines*e+"deg",left:~~n}),r(l(t("roundrect",{arcsize:i.corners}),{width:o,height:i.width,left:i.radius,top:-i.width>>1,filter:a}),t("fill",{color:i.color,opacity:i.opacity}),t("stroke",{opacity:0}))))}if(i.shadow)for(a=1;a<=i.lines;a++)p(a,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(a=1;a<=i.lines;a++)p(a);return r(e,f)},c.prototype.opacity=function(t,e,i,o){var r=t.firstChild;o=o.shadow&&o.lines||0,r&&e+o<r.childNodes.length&&(r=(r=(r=r.childNodes[e+o])&&r.firstChild)&&r.firstChild)&&(r.opacity=i)}}():t=a(u,"animation"),c});