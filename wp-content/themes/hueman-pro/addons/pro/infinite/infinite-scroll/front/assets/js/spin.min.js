!function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Spinner=e()}(this,function(){"use strict";var v,n=["webkit","Moz","ms","O"],y={};function m(t,e){var i,o=document.createElement(t||"div");for(i in e)o[i]=e[i];return o}function g(t){for(var e=1,i=arguments.length;e<i;e++)t.appendChild(arguments[e]);return t}var t,x=(t=m("style",{type:"text/css"}),g(document.getElementsByTagName("head")[0],t),t.sheet||t.styleSheet);function o(t,e){var i,o,r=t.style;if(void 0!==r[e])return e;for(e=e.charAt(0).toUpperCase()+e.slice(1),o=0;o<n.length;o++)if(void 0!==r[i=n[o]+e])return i}function w(t,e){for(var i in e)t.style[o(t,i)||i]=e[i];return t}function e(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)void 0===t[o]&&(t[o]=i[o])}return t}function h(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}var i={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};function r(t){if(void 0===this)return new r(t);this.opts=e(t||{},r.defaults,i)}r.defaults={},e(r.prototype,{spin:function(t){this.stop();var e,i,o=this,r=o.opts,n=o.el=w(m(0,{className:r.className}),{position:r.position,width:0,zIndex:r.zIndex}),s=r.radius+r.length+r.width;if(t&&(t.insertBefore(n,t.firstChild||null),i=h(t),e=h(n),w(n,{left:("auto"==r.left?i.x-e.x+(t.offsetWidth>>1):parseInt(r.left,10)+s)+"px",top:("auto"==r.top?i.y-e.y+(t.offsetHeight>>1):parseInt(r.top,10)+s)+"px"})),n.setAttribute("role","progressbar"),o.lines(n,o.opts),!v){var a,l=0,d=(r.lines-1)*(1-r.direction)/2,f=r.fps,p=f/r.speed,c=(1-r.opacity)/(p*r.trail/100),u=p/r.lines;!function t(){l++;for(var e=0;e<r.lines;e++)a=Math.max(1-(l+(r.lines-e)*u)%p*c,r.opacity),o.opacity(n,e*r.direction+d,a,r);o.timeout=o.el&&setTimeout(t,~~(1e3/f))}()}return o},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(t,i){var e,o,r,n,s,a,l,d,f,p,c=0,u=(i.lines-1)*(1-i.direction)/2;function h(t,e){return w(m(),{position:"absolute",width:i.length+i.width+"px",height:i.width+"px",background:t,boxShadow:e,transformOrigin:"left",transform:"rotate("+~~(360/i.lines*c+i.rotate)+"deg) translate("+i.radius+"px,0)",borderRadius:(i.corners*i.width>>1)+"px"})}for(;c<i.lines;c++)e=w(m(),{position:"absolute",top:1+~(i.width/2)+"px",transform:i.hwaccel?"translate3d(0,0,0)":"",opacity:i.opacity,animation:v&&(o=i.opacity,r=i.trail,n=u+c*i.direction,s=i.lines,void 0,void 0,void 0,void 0,void 0,a=["opacity",r,~~(100*o),n,s].join("-"),l=.01+n/s*100,d=Math.max(1-(1-o)/r*(100-l),o),f=v.substring(0,v.indexOf("Animation")).toLowerCase(),p=f&&"-"+f+"-"||"",y[a]||(x.insertRule("@"+p+"keyframes "+a+"{0%{opacity:"+d+"}"+l+"%{opacity:"+o+"}"+(l+.01)+"%{opacity:1}"+(l+r)%100+"%{opacity:"+o+"}100%{opacity:"+d+"}}",x.cssRules.length),y[a]=1),a+" "+1/i.speed+"s linear infinite")}),i.shadow&&g(e,w(h("#000","0 0 4px #000"),{top:"2px"})),g(t,g(e,h(i.color,"0 0 1px rgba(0,0,0,.1)")));return t},opacity:function(t,e,i){e<t.childNodes.length&&(t.childNodes[e].style.opacity=i)}});var s=w(m("group"),{behavior:"url(#default#VML)"});return!o(s,"transform")&&s.adj?function(){function d(t,e){return m("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e)}x.addRule(".spin-vml","behavior:url(#default#VML)"),r.prototype.lines=function(t,o){var r=o.length+o.width,e=2*r;function n(){return w(d("group",{coordsize:e+" "+e,coordorigin:-r+" "+-r}),{width:e,height:e})}var i,s=2*-(o.width+o.length)+"px",a=w(n(),{position:"absolute",top:s,left:s});function l(t,e,i){g(a,g(w(n(),{rotation:360/o.lines*t+"deg",left:~~e}),g(w(d("roundrect",{arcsize:o.corners}),{width:r,height:o.width,left:o.radius,top:-o.width>>1,filter:i}),d("fill",{color:o.color,opacity:o.opacity}),d("stroke",{opacity:0}))))}if(o.shadow)for(i=1;i<=o.lines;i++)l(i,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(i=1;i<=o.lines;i++)l(i);return g(t,a)},r.prototype.opacity=function(t,e,i,o){var r=t.firstChild;o=o.shadow&&o.lines||0,r&&e+o<r.childNodes.length&&(r=(r=(r=r.childNodes[e+o])&&r.firstChild)&&r.firstChild)&&(r.opacity=i)}}():v=o(s,"animation"),r});